# =============================================================================
# CONFIGURAÇÃO GRPC - ESSENCIAL PARA RESOLVER O ERRO
# =============================================================================

# Servidor gRPC
quarkus.grpc.server.port=9000
quarkus.grpc.server.host=localhost
quarkus.grpc.server.enable-reflection-service=true

# Cliente gRPC "hello" - CONFIGURAÇÃO OBRIGATÓRIA
quarkus.grpc.clients.hello.host=localhost
quarkus.grpc.clients.hello.port=9000
quarkus.grpc.clients.hello.plain-text=true
quarkus.grpc.clients.hello.deadline=10s

# =============================================================================
# CONFIGURAÇÃO KAFKA
# =============================================================================

# Kafka básico
kafka.bootstrap.servers=localhost:9092
kafka.group.id=test

# Configuração específica para dev
%dev.kafka.bootstrap.servers=localhost:9092

# MP Messaging - Outgoing (Produtores)
mp.messaging.outgoing.movies-out.connector=smallrye-kafka
mp.messaging.outgoing.movies-out.topic=movies
mp.messaging.outgoing.movies-out.value.serializer=io.apicurio.registry.serde.jsonschema.JsonSchemaKafkaSerializer
mp.messaging.outgoing.movies-out.apicurio.registry.auto-register=true
mp.messaging.outgoing.movies-out.apicurio.registry.artifact.schema.location=json-schema.json

mp.messaging.outgoing.products-out.connector=smallrye-kafka
mp.messaging.outgoing.products-out.topic=products

mp.messaging.outgoing.prices-out.connector=smallrye-kafka
mp.messaging.outgoing.prices-out.topic=prices

mp.messaging.outgoing.fruit-out.connector=smallrye-kafka
mp.messaging.outgoing.fruit-out.topic=fruit
mp.messaging.outgoing.fruit-out.value.serializer=io.quarkus.kafka.client.serialization.ObjectMapperSerializer

# MP Messaging - Incoming (Consumidores)
mp.messaging.incoming.movies-in.connector=smallrye-kafka
mp.messaging.incoming.movies-in.topic=movies
mp.messaging.incoming.movies-in.value.deserializer=io.apicurio.registry.serde.jsonschema.JsonSchemaKafkaDeserializer
mp.messaging.incoming.movies-in.enable.auto.commit=false
mp.messaging.incoming.movies-in.enable.auto.offset.reset=earliest

mp.messaging.incoming.fruit-in.connector=smallrye-kafka
mp.messaging.incoming.fruit-in.topic=fruit
mp.messaging.incoming.fruit-in.value.deserializer=com.github.fabriciolfj.deserializer.FruitDeserializer
mp.messaging.incoming.fruit-in.isolation.level=read_committed
mp.messaging.incoming.fruit-in.commit-strategy=checkpoint
mp.messaging.incoming.fruit-in.concurrency=3

mp.messaging.incoming.prices-in.connector=smallrye-kafka
mp.messaging.incoming.prices-in.topic=prices
mp.messaging.incoming.prices-in.isolation.level=read_committed
mp.messaging.incoming.prices-in.commit-strategy=checkpoint
mp.messaging.incoming.prices-in.checkpoint.state-store=quarkus-redis
mp.messaging.incoming.prices-in.checkpoint.state-type=com.github.fabriciolfj.model.AveragePrice
mp.messaging.incoming.prices-in.checkpoint.quarkus-redis.client-name=my-redis
mp.messaging.incoming.prices-in.concurrency=3

mp.messaging.incoming.products-in.connector=smallrye-kafka
mp.messaging.incoming.products-in.topic=products

# =============================================================================
# CONFIGURAÇÃO REDIS
# =============================================================================
quarkus.redis.my-redis.hosts=redis://localhost:6379

# =============================================================================
# CONFIGURAÇÃO GERAL QUARKUS
# =============================================================================
quarkus.http.port=8080
quarkus.application.name=quarkus-grpc-kafka-example

# Logs
quarkus.log.category."io.grpc".level=INFO
quarkus.log.category."io.quarkus.grpc".level=DEBUG